# v
计181 2018310756  张青

一、实验题目
    利用已学的字符串处理知识编程完成《长恨歌》古诗的整理对齐工作，写出功能函数，并运行。达到如下功能：
 1.每7个汉字加入一个标点符号，奇数时加“，”，偶数时加“。”
 2.允许提供输入参数，统计古诗中某个字或词出现的次数 
 3.考虑操作中可能出现的异常，在程序中设计异常处理程序
    输入：汉皇重色思倾国御宇多年求不得杨家有女初长成养在深闺人未识天生丽质难自弃一朝选在君王侧回眸一笑百媚生六宫粉黛无颜色春寒赐浴华清池温泉水滑洗凝脂侍儿扶起娇无力始是新承恩泽时云鬓花颜金步摇芙蓉帐暖度春宵春宵苦短日高起从此君王不早朝承欢侍宴无闲暇春从春游夜专夜后宫佳丽三千人三千宠爱在一身金屋妆成娇侍夜玉楼宴罢醉和春姊妹弟兄皆列士可怜光采生门户遂令天下父母心不重生男重生女骊宫高处入青云仙乐风飘处处闻缓歌慢舞凝丝竹尽日君王看不足渔阳鼙鼓动地来惊破霓裳羽衣曲九重城阙烟尘生千乘万骑西南行翠华摇摇行复止西出都门百余里六军不发无奈何宛转蛾眉马前死花钿委地无人收翠翘金雀玉搔头君王掩面救不得回看血泪相和流黄埃散漫风萧索云栈萦纡登剑阁峨嵋山下少人行旌旗无光日色薄蜀江水碧蜀山青圣主朝朝暮暮情行宫见月伤心色夜雨闻铃肠断声天旋地转回龙驭到此踌躇不能去马嵬坡下泥土中不见玉颜空死处君臣相顾尽沾衣东望都门信马归归来池苑皆依旧太液芙蓉未央柳芙蓉如面柳如眉对此如何不泪垂春风桃李花开日秋雨梧桐叶落时西宫南内多秋草落叶满阶红不扫梨园弟子白发新椒房阿监青娥老夕殿萤飞思悄然孤灯挑尽未成眠迟迟钟鼓初长夜耿耿星河欲曙天鸳鸯瓦冷霜华重翡翠衾寒谁与共悠悠生死别经年魂魄不曾来入梦临邛道士鸿都客能以精诚致魂魄为感君王辗转思遂教方士殷勤觅排空驭气奔如电升天入地求之遍上穷碧落下黄泉两处茫茫皆不见忽闻海上有仙山山在虚无缥渺间楼阁玲珑五云起其中绰约多仙子中有一人字太真雪肤花貌参差是金阙西厢叩玉扃转教小玉报双成闻道汉家天子使九华帐里梦魂惊揽衣推枕起徘徊珠箔银屏迤逦开云鬓半偏新睡觉花冠不整下堂来风吹仙袂飘飖举犹似霓裳羽衣舞玉容寂寞泪阑干梨花一枝春带雨含情凝睇谢君王一别音容两渺茫昭阳殿里恩爱绝蓬莱宫中日月长回头下望人寰处不见长安见尘雾惟将旧物表深情钿合金钗寄将去钗留一股合一扇钗擘黄金合分钿但教心似金钿坚天上人间会相见临别殷勤重寄词词中有誓两心知七月七日长生殿夜半无人私语时在天愿作比翼鸟在地愿为连理枝天长地久有时尽此恨绵绵无绝期。
二 编写思路
    1. 该实验相对来说还是很简单的。我将它分为三个部分即排版、统计与异常处理三部分。
第一部分：排版
    通过观察首诗，可以发现，当在第七个汉字后面插入逗号后，在每隔14个汉字再插入一个逗号，这样逗号就插进去了，而插入句号则是同理，不过句号第一个位置是15，每隔16位插入一个句号（和逗号数位不同，是因为已经将逗号插入，因此插入句号时应该往后移一位）。接下来是换行，换行也是同一样的思路，它是在句号后面进行换行的。

第二部分：
统计
该部分应实现输入一个字符，来统计这个字在《长恨歌》出现的次数。因此，我先写了一个输入代码，保证字符串可以
输入。然后写了一个count函数。在函数中，我用indexOf()来判断n1和n2是否相同。index = n1.indexOf(n2,index))>-1。
若该条件成立，就用sum 统计出现次数。最后将数值数值返回给count（），再打印出结果。

第三部分：
异常处理
对于异常处理，说实话我学的并不好，也就是最基础的try-catch我看不懂怎么用，但是为了满足要求，我只好剑走偏
锋，用if来进行异常处理。再这个实验中，最容易出现的异常便是空字符。因此我设定了若input的值为空，那么则抛出提
示，表示输入不能为空
2， 流程图
![233233](https://github.com/BoerZhao/Zbe/blob/master/图片1.png)

3,代码解释
 package chang;

import java.util.Scanner;
import java.util.*;

public class changhenge {
public static void main(String args[] ) {
	   StringBuffer s =new StringBuffer("汉皇重色思倾国御宇多年求不得杨家有女初长成养在深闺人未识天生丽质难自弃一朝选在君王侧回眸一笑百媚生六宫粉黛无颜色春寒赐浴华清池温泉水滑洗凝脂侍儿扶起娇无力始是新承恩泽时云鬓花颜金步摇芙蓉帐暖度春宵春宵苦短日高起从此君王不早朝承欢侍宴无闲暇春从春游夜专夜后宫佳丽三千人三千宠爱在一身金屋妆成娇侍夜玉楼宴罢醉和春姊妹弟兄皆列士可怜光采生门户遂令天下父母心不重生男重生女骊宫高处入青云仙乐风飘处处闻缓歌慢舞凝丝竹尽日君王看不足渔阳鼙鼓动地来惊破霓裳羽衣曲九重城阙烟尘生千乘万骑西南行翠华摇摇行复止西出都门百余里六军不发无奈何宛转蛾眉马前死花钿委地无人收翠翘金雀玉搔头君王掩面救不得回看血泪相和流黄埃散漫风萧索云栈萦纡登剑阁峨嵋山下少人行旌旗无光日色薄蜀江水碧蜀山青圣主朝朝暮暮情行宫见月伤心色夜雨闻铃肠断声天旋地转回龙驭到此踌躇不能去马嵬坡下泥土中不见玉颜空死处君臣相顾尽沾衣东望都门信马归归来池苑皆依旧太液芙蓉未央柳芙蓉如面柳如眉对此如何不泪垂春风桃李花开日秋雨梧桐叶落时西宫南内多秋草落叶满阶红不扫梨园弟子白发新椒房阿监青娥老夕殿萤飞思悄然孤灯挑尽未成眠迟迟钟鼓初长夜耿耿星河欲曙天鸳鸯瓦冷霜华重翡翠衾寒谁与共悠悠生死别经年魂魄不曾来入梦临邛道士鸿都客能以精诚致魂魄为感君王辗转思遂教方士殷勤觅排空驭气奔如电升天入地求之遍上穷碧落下黄泉两处茫茫皆不见忽闻海上有仙山山在虚无缥渺间楼阁玲珑五云起其中绰约多仙子中有一人字太真雪肤花貌参差是金阙西厢叩玉扃转教小玉报双成闻道汉家天子使九华帐里梦魂惊揽衣推枕起徘徊珠箔银屏迤逦开云鬓半偏新睡觉花冠不整下堂来风吹仙袂飘飖举犹似霓裳羽衣舞玉容寂寞泪阑干梨花一枝春带雨含情凝睇谢君王一别音容两渺茫昭阳殿里恩爱绝蓬莱宫中日月长回头下望人寰处不见长安见尘雾惟将旧物表深情钿合金钗寄将去钗留一股合一扇钗擘黄金合分钿但教心似金钿坚天上人间会相见临别殷勤重寄词词中有誓两心知七月七日长生殿夜半无人私语时在天愿作比翼鸟在地愿为连理枝天长地久有时尽此恨绵绵无绝期");
       StringBuffer s1 = new StringBuffer("汉");
	   for (int i = 7;i<s.length();i+=8) {
    	   s.insert(i, "，");
            }
       /*
                * 从第八个组为第一个添加逗号的地方，而后每隔7位，即在第八位添加逗号1
        */
       for (int a = 15;a<s.length();a+=15) {
    	   s.deleteCharAt(a);
            }
        for (int b = 15;b<s.length();b+=16) {
             s.insert(b, "。");
            }
        for (int c = 16;c<s.length();c+=17) {
            s.insert(c, "\n");
            }
       System.out.println(s);
       System.out.println("包含次数为："+count(s.toString(),s1.toString()));
   }
  static int count(String n1,String n2) {
	   int sum = 0;
	   int index = -1;
	   while((index = n1.indexOf(n2,index))>-1) {
		   index += 7;
		   sum++;
	   }
	   return sum;
  }
} 


三、 结果图

四、心得
此次实验我觉得相对前几次的实验较为简单，我先去网上将《长恨歌》的原文准备，经过一点点的调试改正，最终得到了想要的结果。这首诗歌是我最喜欢的，因此对这次的实验尤为感兴趣。
这次的实验并不算难，在上学期别的实验代码也写过类似的，但是我还是有点收获的，至少我对排版有了更深的了解。而且我也意识到Java的字符串与python的不同，
相比之下，java 的字符串我觉得更加灵活，使用方法也更多样。因此我对Java这门语言的理解更进一步了。这次对我来说难的
地方是异常机制中的try-catch，我到现在都没搞明白如何去运用它，只能用if来弥补。但是我相信我以后会学会并去运用它的。
